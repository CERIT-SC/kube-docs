# ownCloud

## Spuštění klienta ownCloud

Pokud nejste již přihlášeni, přihlaste se na [rancher.cloud.e-infra.cz](https://rancher.cloud.e-infra.cz), viz sekce [Rancher](../rancher/rancher).

Následujícími kroky můžete spustit aplikaci klienta ownCloud. Tato aplikace slouží k sdílení a synchronizaci dat mezi podem (jinou běžící aplikací) a serverem ownCloud, např. [owncloud.cesnet.cz](https://owncloud.cesnet.cz).

### Poznámky

* Důležitá podmínka: aplikační pod musí používat [PVC](../kubernetes/pvc), aby klient ownCloud mohl synchronizovat data do podu. Pokud není použito žádné PVC, synchronizace není možná.
  * U většiny aplikací zde je možné vybrat *persistent home*, což znamená použití *PVC*.

### Zkontrolujte svou aplikaci

Vyberte svůj `Namespace` (1), přejděte na `Workload` (2), `Pods` (3) a název aplikace (4), např. `ansys-0` -- klikněte na název. Viz snímek obrazovky níže.

![findpod](/img/ceritsc/apps/owncloud/findpod.png)

Klikněte na vertikální tečky (1) a vyberte Spustit shell (2).

![enterpod](/img/ceritsc/apps/owncloud/enterpod.png)

V novém *terminálovém okně* (1) zadejte příkaz `df` a zkontrolujte, zda vidíte nějaký vzdálený souborový systém připojený k domovskému adresáři (2) nebo někde jinde.

![inpod](/img/ceritsc/apps/owncloud/inpod.png)

### Vyberte aplikaci k spuštění

Ujistěte se, že jste nevybrali žádný namespace a vidíte `Only User Namespaces` (1) v horní části stránky Rancher.

Přejděte na `App & Marketplace` (2), `Charts` (3), omezte grafy pouze na `cerit-sc` (4) a vyberte `ownCloud` (5). Viz snímek obrazovky níže.

![selectapp](/img/ceritsc/apps/owncloud/selectapp.png)

### Vyberte verzi aplikace

Když kliknete na graf, stiskněte `Install`, abyste pokračovali.

![selectversion](/img/ceritsc/apps/owncloud/selectversion.png)

### Nainstalujte aplikaci

Nyní můžete nainstalovat aplikaci ownCloud. Ve většině případů ponechte jak `Namespace` (1), tak `Name` (2) beze změny, avšak musíte vybrat stejný namespace, ve kterém běží pod, ze kterého chcete přenášet data. `Name` bude v URL pro přístup k aplikaci. `Name` musí být jedinečné v `Namespace`, tj. nemůžete spustit dvě nebo více instancí se stejným `Name` ve stejném `Namespace`.

![appinst](/img/ceritsc/apps/owncloud/appinst.png)

V první části formuláře vyberte server ownCloud, pro [owncloud.cesnet.cz](https://owncloud.cesnet.cz) ponechte výchozí hodnotu. Vyplňte `username` a `password`. Můžete je najít [zde](https://du.cesnet.cz/en/navody/owncloud/start#access_via_webdav_protocol) (viz Přístup přes protokol WebDAV), jak je získat pro `owncloud.cesnet.cz`. Vyberte `PVC`, se kterým chcete synchronizovat. Ve většině případů je `PVC` obsahující název `home` připojeno k `/home/user`, zatímco `PVC` obsahující název `storage` je připojeno k `/storage`.

Vyplňte `Local Directory`. Toto je relativní adresář k připojenému `PVC`. Např. pokud nastavíte `Local Directory` na `owncloud-data` a vyberete "home" `PVC`, vaše data budou synchronizována do `/home/user/owncloud-data`.

Vyplňte `Remote Directory`, `/` znamená, že všechny vzdálené soubory a adresáře budou synchronizovány, nebo můžete napsat konkrétní adresář nebo cestu ze serveru ownCloud, jako např. `documents`.

![appform](/img/ceritsc/apps/owncloud/appform1.png)

### Počkejte, až se aplikace spustí

Když stisknete `Install`, uvidíte instalační protokol. Jakmile uvidíte `SUCCESS` (viz snímek obrazovky níže), aplikace běží.

![apphelm](/img/ceritsc/apps/owncloud/apphelm.png)

Jakmile tato aplikace běží, neuvidíte nic zvláštního, kromě toho, že se data synchronizují.

## Odstranit běžící instanci

Pokud máte pocit, že aplikaci již nepotřebujete, můžete ji odstranit. Stačí přejít na `App & Marketplace` (1), `Installed Apps` (2), vybrat aplikaci (3) a stisknout `Delete` (4). Data v domovském adresáři nejsou odstraněna, pokud zkontrolujete persistent home. Opětovným spuštěním aplikace se stejným `Name` obnovíte přístup k adresáři domovského adresáře.

![appdel](/img/ceritsc/apps/owncloud/appdel.png)
